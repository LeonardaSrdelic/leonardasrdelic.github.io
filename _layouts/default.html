<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "hr" }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="{{ page.description | default: site.description }}">
    <title>{{ page.title | default: site.title }}</title>
    <link rel="canonical" href="{{ page.url | relative_url }}">
    
    <!-- Uključivanje Font Awesome-a preko CDN-a -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    {%- include head.html -%}
  </head>
  <body>

    {%- include cookie-consent.html -%}
    {%- include header.html -%}
    <main class="page-content">
      <div class="wrapper">
        <!-- Sadržaj stranice -->
        {{ content }}
      </div>
    </main>
    {%- include footer.html -%}
    <script src="{{ '/assets/navigation.js' | relative_url }}" defer></script>
    <script>
      (function() {
        var GA_ID = 'G-MNWHH06E2E';
        var CONSENT_COOKIE = 'cookie_consent_accepted=';
        var MAX_AGE = 365 * 24 * 60 * 60;

        function hasConsent() {
          return document.cookie.split(';').some(function(item) {
            return item.trim().indexOf(CONSENT_COOKIE) === 0;
          });
        }

        function setConsentCookie() {
          document.cookie = CONSENT_COOKIE + 'true; path=/; max-age=' + MAX_AGE;
        }

        function ensureGtag() {
          window.dataLayer = window.dataLayer || [];
          window.gtag = window.gtag || function(){ dataLayer.push(arguments); };
        }

        function loadGoogleAnalytics() {
          if (window.__gaLoaded) return;
          var gaScript = document.createElement('script');
          gaScript.async = true;
          gaScript.src = 'https://www.googletagmanager.com/gtag/js?id=' + GA_ID;
          document.head.appendChild(gaScript);
          ensureGtag();
          gtag('js', new Date());
          gtag('config', GA_ID);
          window.__gaLoaded = true;
        }

        function showBanner() {
          var banner = document.getElementById('cookie-banner');
          if (banner) banner.style.display = 'block';
        }

        function hideBanner() {
          var banner = document.getElementById('cookie-banner');
          if (banner) banner.style.display = 'none';
        }

        window.acceptCookies = function() {
          setConsentCookie();
          ensureGtag();
          gtag('consent', 'update', { analytics_storage: 'granted' });
          loadGoogleAnalytics();
          hideBanner();
        };

        function init() {
          ensureGtag();
          if (hasConsent()) {
            gtag('consent', 'update', { analytics_storage: 'granted' });
            loadGoogleAnalytics();
            hideBanner();
          } else {
            gtag('consent', 'default', { analytics_storage: 'denied' });
            showBanner();
          }
        }

        document.addEventListener('DOMContentLoaded', init);
      })();
    </script>
  </body>
</html>

